import{d as $,l as B,f as i,m as k,w as b,c as a,o as r,b as c,F as T,r as S,p as O,t as m,v as D,q as W,s as E,e as F,i as N,_ as V}from"./index-7T5KtQwS.js";const K={key:0,class:"inline text-nowrap"},L={class:"terminal-prompt mr-2 text-nowrap"},z={class:"text-wrap"},A={key:1,class:"terminal-file-list grid grid-cols-4"},R={key:0,class:"text-blue-400 mr-1"},q={key:1,class:"text-yellow-300 mr-1"},H={key:2,class:"terminal-output"},I={class:"terminal-line flex"},M={class:"terminal-prompt mr-2 text-nowrap"},P=$({__name:"TerminalWindow",setup(U){const{settings:_}=B(),p=i(""),u=i([{type:"output",text:"Welcome to 陈刑OS Terminal!"},{type:"output",text:'Type "help" for available commands'}]),d=i(null),f=i(null),l=i([]),h=k(()=>l.value.length>0?`~/${l.value.join("/")}`:"~"),w=t=>k(()=>`[${t}] $`),C=i({name:"~",type:"dir",children:[{name:"about.txt",type:"file",content:"陈刑OS is a personal desktop environment built with Vue.js"},{name:"contact.txt",type:"file",content:"微博: @陈刑很刑"},{name:"projects",type:"dir",children:[{name:"game-dev",type:"dir",children:[]}]},{name:"documents",type:"dir",children:[{name:"ideas.md",type:"file",content:`# Future Features

- Notepad application
- Calculator`}]},{name:"readme.md",type:"file",content:`# Welcome to 陈刑OS
This is a personal desktop environment with a cozy minimalist theme.`}]}),v=()=>{let t=C.value.children;for(const n of l.value){const e=t.find(o=>o.name===n&&o.type==="dir"&&o.children);if(e&&e.children)t=e.children;else return[]}return t},g=()=>{N(()=>{d.value&&(d.value.scrollTop=d.value.scrollHeight)})};b(u,()=>{g()},{deep:!0}),b([d,f],()=>{var t;(t=f.value)==null||t.focus()});const x={help:()=>[{type:"output",text:"Available commands: "+Object.keys(x).join(", ")}],neofetch:()=>[{type:"output",text:"user@chenxing-dev.github.io"},{type:"output",text:"os           陈刑OS v1.0"},{type:"output",text:"host       chenxing-dev.github.io"},{type:"output",text:"shell      vue-sh 3.5.13"},{type:"output",text:`theme  ${_.value.theme}`}],clear:()=>{u.value=[]},about:()=>[{type:"output",text:"陈刑OS is a personal desktop environment built with Vue.js"}],date:()=>[{type:"output",text:new Date().toLocaleString()}],echo:t=>[{type:"output",text:t?t.join(" "):""}],ls:()=>[{type:"file-list",items:v()}],cat:t=>{if(!t||t.length===0)return[{type:"output",text:"cat: missing file operand"}];const n=t[0],o=v().find(s=>s.name===n&&s.type==="file");return o&&o.content?[{type:"output",text:o.content}]:[{type:"output",text:`cat: ${n}: No such file or directory`}]},cd:t=>{if(!t||t.length===0)return[];const n=t[0];return n===".."?(l.value.length>0&&(l.value=l.value.slice(0,-1)),[]):v().some(s=>s.name===n&&s.type==="dir")?(l.value=[...l.value,n],[]):[{type:"output",text:`cd: ${n}: No such directory`}]},pwd:()=>[{type:"output",text:h.value}]},j=()=>{const t=p.value.trim();if(!t)return;const n=h.value;u.value.push({type:"command",text:p.value,cwd:n});const[e,...o]=t.split(" "),s=e.toLowerCase();if(x[s]){const y=x[s](o);y&&u.value.push(...y)}else u.value.push({type:"output",text:`Command not found: ${e}.`}),u.value.push({type:"output",text:'Type "help" for commands.'});p.value="",g()};return(t,n)=>(r(),a("div",{class:E(["terminal whitespace-pre overflow-auto h-full text-wrap break-all py-2 px-4",F(_).theme]),ref_key:"terminalBody",ref:d},[(r(!0),a(T,null,S(u.value,(e,o)=>(r(),a("div",{key:o,class:"terminal-line"},[e.type==="command"?(r(),a("p",K,[c("span",L,m(w(e.cwd)),1),c("span",z,m(e.text),1)])):e.type==="file-list"?(r(),a("span",A,[(r(!0),a(T,null,S(e.items,(s,y)=>(r(),a("div",{key:y,class:"flex items-center"},[s.type==="dir"?(r(),a("span",R,"📁")):(r(),a("span",q,"📄")),c("span",null,m(s.name),1)]))),128))])):(r(),a("p",H,m(e.text),1))]))),128)),c("p",I,[c("span",M,m(w(h.value)),1),O(c("input",{class:"terminal-input bg-transparent outline-none flex-1","onUpdate:modelValue":n[0]||(n[0]=e=>p.value=e),onKeyup:W(j,["enter"]),ref_key:"inputRef",ref:f,autofocus:""},null,544),[[D,p.value]])])],2))}}),J=V(P,[["__scopeId","data-v-796727cb"]]);export{J as default};
