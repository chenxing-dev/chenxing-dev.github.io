import{d as j,s as A,r as i,v as k,w as b,c as a,o as r,g as c,F as T,h as C,t as m,x as $,y as D,z as L,A as O,u as V,p as E,_ as W}from"./index-D1je-Aq1.js";const H={key:0,class:"inline text-nowrap"},K={class:"terminal-prompt mr-2 text-nowrap"},N={class:"text-wrap"},R={key:1,class:"terminal-file-list grid grid-cols-4"},z={key:0,class:"text-blue-400 mr-1"},F={key:1,class:"text-yellow-300 mr-1"},G={key:2,class:"terminal-output"},M={class:"terminal-line flex"},P={class:"terminal-prompt mr-2 text-nowrap"},I=j({__name:"TerminalWindow",setup(U){const{settings:g}=A(),p=i(""),u=i([{type:"output",text:"Welcome to 陈刑OS Terminal!"},{type:"output",text:'Type "help" for available commands'}]),d=i(null),f=i(null),l=i([]),y=k(()=>l.value.length>0?`~/${l.value.join("/")}`:"~"),_=t=>k(()=>`[${t}] $`),S=i({name:"~",type:"dir",children:[{name:"readme.md",type:"file",content:["# ChenXing OS ~","A handcrafted personal web desktop built with Vue 3 + Vite.","","Try: `help`, `ls`, `cd projects`, `cat about.txt`.","Have fun hacking around."].join(`
`)},{name:"about.txt",type:"file",content:"陈刑OS is a personal web desktop. Built with Vue 3, curiosity, and caffeine."},{name:"contact.txt",type:"file",content:`微博: @陈刑很刑
GitHub: chenxing-dev`},{name:"projects",type:"dir",children:[{name:"arduino.txt",type:"file",content:`Arduino RGB Lighting Controller
Stack: C++ / Arduino
Link: https://github.com/chenxing-dev/arduino-rbg-light`},{name:"blog.txt",type:"file",content:`Personal Blog (Astro + Markdown). Drafting long-form thoughts on learning & tools.
Link: https://blog.chenxing.dev`}]},{name:"stars.txt",type:"file",content:"★ ✦ ✧ ✺ ✹ ✸ ✶ ✵ ✷"}]}),x=()=>{let t=S.value.children;for(const n of l.value){const e=t.find(o=>o.name===n&&o.type==="dir"&&o.children);if(e&&e.children)t=e.children;else return[]}return t},w=()=>{E(()=>{d.value&&(d.value.scrollTop=d.value.scrollHeight)})};b(u,()=>{w()},{deep:!0}),b([d,f],()=>{var t;(t=f.value)==null||t.focus()});const v={help:()=>[{type:"output",text:"Available commands: "+Object.keys(v).join(", ")}],neofetch:()=>[{type:"output",text:"user@chenxing-dev.github.io"},{type:"output",text:"os           陈刑OS v1.0"},{type:"output",text:"host       chenxing-dev.github.io"},{type:"output",text:"shell      vue-sh 3.5.13"},{type:"output",text:`theme  ${g.value.theme}`}],clear:()=>{u.value=[]},about:()=>[{type:"output",text:"陈刑OS is a personal desktop environment built with Vue.js"}],date:()=>[{type:"output",text:new Date().toLocaleString()}],echo:t=>[{type:"output",text:t?t.join(" "):""}],ls:()=>[{type:"file-list",items:x()}],cat:t=>{if(!t||t.length===0)return[{type:"output",text:"cat: missing file operand"}];const n=t[0],o=x().find(s=>s.name===n&&s.type==="file");return o?o.content?[{type:"output",text:o.content}]:[{type:"output",text:""}]:[{type:"output",text:`cat: ${n}: No such file or directory`}]},cd:t=>{if(!t||t.length===0)return[];const n=t[0];return n===".."?(l.value.length>0&&(l.value=l.value.slice(0,-1)),[]):x().some(s=>s.name===n&&s.type==="dir")?(l.value=[...l.value,n],[]):[{type:"output",text:`cd: ${n}: No such directory`}]},pwd:()=>[{type:"output",text:y.value}]},B=()=>{const t=p.value.trim();if(!t)return;const n=y.value;u.value.push({type:"command",text:p.value,cwd:n});const[e,...o]=t.split(" "),s=e.toLowerCase();if(v[s]){const h=v[s](o);h&&u.value.push(...h)}else u.value.push({type:"output",text:`Command not found: ${e}.`}),u.value.push({type:"output",text:'Type "help" for commands.'});p.value="",w()};return(t,n)=>(r(),a("div",{class:O(["terminal whitespace-pre overflow-y-auto overflow-x-hidden h-full text-wrap break-all py-2 px-4",V(g).theme]),ref_key:"terminalBody",ref:d},[(r(!0),a(T,null,C(u.value,(e,o)=>(r(),a("div",{key:o,class:"terminal-line"},[e.type==="command"?(r(),a("p",H,[c("span",K,m(_(e.cwd)),1),c("span",N,m(e.text),1)])):e.type==="file-list"?(r(),a("span",R,[(r(!0),a(T,null,C(e.items,(s,h)=>(r(),a("div",{key:h,class:"flex items-center"},[s.type==="dir"?(r(),a("span",z,"📁")):(r(),a("span",F,"📄")),c("span",null,m(s.name),1)]))),128))])):(r(),a("p",G,m(e.text),1))]))),128)),c("p",M,[c("span",P,m(_(y.value)),1),$(c("input",{class:"terminal-input bg-transparent outline-none flex-1","onUpdate:modelValue":n[0]||(n[0]=e=>p.value=e),onKeyup:L(B,["enter"]),ref_key:"inputRef",ref:f,autofocus:""},null,544),[[D,p.value]])])],2))}}),q=W(I,[["__scopeId","data-v-3184a214"]]);export{q as default};
