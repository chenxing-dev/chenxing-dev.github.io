import{d as P,r as i,v as S,f as $,B as j,c,o as d,g as e,t as r,n as z,F as D,h as F,i as x,A as k}from"./index-BJMYCBlT.js";const R={class:"flex flex-col w-full h-full"},A={class:"w-full h-full flex flex-col justify-center px-2"},N=["src"],U={class:"px-4"},V={class:"mb-4"},G={class:"text-xl font-bold text-zinc-700"},I={class:"text-zinc-600"},K={class:"mb-4"},X={class:"flex justify-between text-zinc-500"},q={class:"flex items-center justify-center space-x-8 mb-4 text-selected"},H={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10",viewBox:"0 0 24 24",fill:"currentColor"},J={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12",viewBox:"0 0 24 24",fill:"currentColor"},O={class:"border-t border-zinc-400/50 max-h-48 overflow-y-auto mx-2"},Q=["onClick"],W={key:0,class:"flex space-x-1"},Y={key:1,class:"text-zinc-500"},Z={class:"flex-1"},ee={class:"text-xs text-zinc-500"},te={class:"text-xs text-zinc-500"},ae=P({__name:"MusicPlayer",setup(le){const v=i([{id:1,title:"Gymnopédie No.1",artist:"Erik Satie, Eric Billingsley",duration:"3:32",color:"#3f3f46",file:{gymnopedie1:"/audio/gymnopedie_no1.mp3"}.gymnopedie1}]),o=i(0),a=i(!1),m=i(0),t=i(null),w=i(0),p=i(0),h=i(!1),f=S(()=>v.value[o.value]),g=()=>{t.value&&(a.value?t.value.pause():t.value.play().catch(s=>{console.error("Audio playback failed:",s)}),a.value=!a.value)},T=s=>{const l=Math.floor(s/60),n=Math.floor(s%60);return`${l}:${n<10?"0":""}${n}`},y=()=>{o.value=(o.value+1)%v.value.length,m.value=0,t.value&&(t.value.currentTime=0,t.value.play().then(()=>{a.value=!0}))},C=()=>{o.value=(o.value-1+v.value.length)%v.value.length,m.value=0,t.value&&(t.value.currentTime=0,t.value.play().then(()=>{a.value=!0}))},B=s=>{if(!t.value||!p.value)return;const l=s.currentTarget.getBoundingClientRect(),u=(s.clientX-l.left)/l.width*p.value;t.value.currentTime=u},M=()=>{!t.value||h.value||(w.value=t.value.currentTime,m.value=w.value/p.value*100)},E=()=>{t.value&&(p.value=t.value.duration)},L=()=>{y()},b=s=>{s.code==="Space"?(s.preventDefault(),g()):s.code==="ArrowRight"?(s.preventDefault(),t.value&&(t.value.currentTime=Math.min(t.value.currentTime+5,p.value))):s.code==="ArrowLeft"&&(s.preventDefault(),t.value&&(t.value.currentTime=Math.max(t.value.currentTime-5,0)))};return $(()=>{window.addEventListener("keydown",b)}),j(()=>{window.removeEventListener("keydown",b),t.value&&t.value.pause()}),(s,l)=>(d(),c("div",R,[e("div",A,[e("audio",{ref_key:"audioRef",ref:t,src:f.value.file,onTimeupdate:M,onLoadedmetadata:E,onEnded:L},null,40,N),e("div",U,[e("div",V,[e("h2",G,r(f.value.title),1),e("p",I,r(f.value.artist),1)]),e("div",K,[e("div",X,[e("span",null,r(T(w.value)),1),e("span",null,r(f.value.duration),1)]),e("div",{class:"h-1.5 bg-selected rounded-full overflow-hidden cursor-pointer",onClick:B,onMousedown:l[0]||(l[0]=n=>h.value=!0),onMouseup:l[1]||(l[1]=n=>h.value=!1)},[e("div",{class:"h-full transition-all duration-300",style:z({width:m.value+"%",backgroundColor:f.value.color})},null,4)],32)]),e("div",q,[e("button",{class:"w-10 h-10 hover:scale-110 transition-all",onClick:C},l[2]||(l[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10",viewBox:"0 0 24 24",fill:"currentColor"},[e("polygon",{points:"14,6 4,13 14,20"}),e("polygon",{points:"23,6 13,13 23,20"})],-1)])),e("button",{class:"w-10 h-10 flex items-center justify-center transition-all hover:scale-105",onClick:g},[a.value?(d(),c("svg",J,l[4]||(l[4]=[e("rect",{x:"5",y:"3",width:"6",height:"18",rx:"1"},null,-1),e("rect",{x:"13",y:"3",width:"6",height:"18",rx:"1"},null,-1)]))):(d(),c("svg",H,l[3]||(l[3]=[e("polygon",{points:"6,2 24,12 6,22"},null,-1)])))]),e("button",{class:"w-10 h-10 hover:scale-110 transition-all",onClick:y},l[5]||(l[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10",viewBox:"0 0 24 24",fill:"currentColor"},[e("polygon",{points:"3,5 13,13 3,21"}),e("polygon",{points:"12,5 22,13 12,21"})],-1)]))])]),e("div",O,[(d(!0),c(D,null,F(v.value,(n,u)=>(d(),c("div",{key:n.id,class:k(["flex items-center p-2 border-b border-zinc-300/50 hover:bg-zinc-100 cursor-pointer transition-colors",{"bg-zinc-50/80":o.value===u}]),onClick:ne=>{var _;o.value=u,a.value&&((_=t.value)==null||_.play())}},[e("div",{class:"w-10 h-10 mr-2 flex items-center justify-center",style:z({backgroundColor:n.color+"20"})},[o.value===u&&a.value?(d(),c("div",W,l[6]||(l[6]=[e("div",{class:"w-1 h-3 bg-zinc-500 animate-pulse",style:{"animation-delay":"0ms"}},null,-1),e("div",{class:"w-1 h-3 bg-zinc-500 animate-pulse",style:{"animation-delay":"300ms"}},null,-1),e("div",{class:"w-1 h-3 bg-zinc-500 animate-pulse",style:{"animation-delay":"600ms"}},null,-1)]))):(d(),c("div",Y,r(u+1),1))],4),e("div",Z,[e("div",{class:k({"text-zinc-600":o.value===u})},r(n.title),3),e("div",ee,r(n.artist),1)]),e("div",te,r(n.duration),1)],10,Q))),128))])]),l[7]||(l[7]=e("div",{class:"bg-zinc-100 p-2 text-center text-xs text-zinc-500 border-t border-zinc-300"},[e("span",{class:"inline-block bg-zinc-50 border border-zinc-300 px-2 py-1 rounded mr-2 shadow"},"Space"),x(" Play/Pause "),e("span",{class:"inline-block bg-zinc-50 border border-zinc-300 px-2 py-1 rounded mx-2 shadow"},"←"),x(" Rewind "),e("span",{class:"inline-block bg-zinc-50 border border-zinc-300 px-2 py-1 rounded ml-2 shadow"},"→"),x(" Forward")],-1))]))}});export{ae as default};
